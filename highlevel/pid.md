># PID 控制算法
>
>## 比例环节( P )
> * 理论：
>     * 成比例地反映控制系统的偏差信号e(t)，偏差一旦产生，控制器立即产生控制作用，以减小偏差。当仅有比例控制时系统输出存在稳态误差（Steady-state error）。
>     * P参数越大比例作用越强，动态响应越快，消除误差的能力越强。但实际系统是有惯性的，控制输出变化后，实际y(t)值变化还需等待一段时间才会缓慢变化。
>     * 由于实际系统是有惯性的，比例作用不宜太强，比例作用太强会引起系统振荡不稳定。
>     * P参数的大小应在以上定量计算的基础上根据系统响应情况，现场调试决定，通常将P参数由大向小调，以能达到最快响应又无超调(或无大的超调)为最佳参数。
> * 优点:
>     * 调整系统的开环比例系数，提高系统的稳态精度，减低系统的惰性，加快响应速度。
> * 缺点:
>     * 仅用P控制器,过大的开环比例系数不仅会使系统的超调量增大，而且会使系统稳定裕度变小，甚至不稳定。

> ## 积分环节( I )
> * 理论：
>     * 控制器的输出与输入误差信号的积分成正比关系。主要用于消除静差，提高系统的无差度。积分作用的强弱取决于积分时间常数T,T越大，积分作用越弱，反之则越强。
>     * 比例作用的输出与误差的大小成正比，误差越大，输出越大，误差越小，输出越小，误差为零，输出为零。由于没有误差时输出为零，因此比例调节不可能完全消除误差，
>     * 不可能使被控的PV值达到给定值。必须存在一个稳定的误差，以维持一个稳定的输出，才能使系统的PV值保持稳定。这就是通常所说的比例作用是有差调节，是有静差的，
>     * 加强比例作用只能减少静差，不能消除静差(静差：即静态误差，也称稳态误差)。
>     * 为了消除静差必须引入积分作用，积分作用可以消除静差，以使被控的y(t)值最后与给定值一致。引进积分作用的目的也就是为了消除静差，使y(t)值达到给定值，并保持一致。
>     * 积分作用消除静差的原理是，只要有误差存在，就对误差进行积分，使输出继续增大或减小，一直到误差为零，积分停止，输出不再变化，系统的PV值保持稳定，y(t)值等于u(t)值，达到无差调节的效果。
>     * 但由于实际系统是有惯性的，输出变化后，y(t)值不会马上变化，须等待一段时间才缓慢变化，因此积分的快慢必须与实际系统的惯性相匹配，
>     * 惯性大、积分作用就应该弱，积分时间I就应该大些，反之而然。如果积分作用太强，积分输出变化过快，就会引起积分过头的现象，产生积分超调和振荡。
>     * 通常I参数也是由大往小调，即积分作用由小往大调，观察系统响应以能达到快速消除误差，达到给定值，又不引起振荡为准。
>     * 对一个自动控制系统，如果在进入稳态后存在稳态误差，则称这个控制系统是有稳态误差的或简称有差系统（System with Steady-state Error）。
>     * 为了消除稳态误差，在控制器中必须引入“积分项”。积分项对误差取决于时间的积分，随着时间的增加，积分项会增大。这样，即便误差很小，积分项也会随着时间的增加而加大，
>     * 它推动控制器的输出增大使稳态误差进一步减小，直到等于零。因此，比例+积分(PI)控制器，可以使系统在进入稳态后无稳态误差。
>     * PI控制器不但保持了积分控制器消除稳态误差的“记忆功能”，而且克服了单独使用积分控制消除误差时反应不灵敏的缺点。
> * 优点：
>     * 消除稳态误差。
> * 缺点：
>     * 积分控制器的加入会影响系统的稳定性，使系统的稳定裕度减小。

>## 微分控制(D)
> * 理论：
>     * 反映偏差信号的变化趋势，并能在偏差信号变得太大之前，在系统中引入一个有效的早期修正信号，从而加快系统的动作速度，减少调节时间。
>     * 在微分控制中，控制器的输出与输入误差信号的微分（即误差的变化率）成正比关系。
> * 为什么要引进微分作用？
>     * 前面已经分析过，不论比例调节作用，还是积分调节作用都是建立在产生误差后才进行调节以消除误差，都是事后调节，因此这种调节对稳态来说是无差的，
>     * 对动态来说肯定是有差的，因为对于负载变化或给定值变化所产生的扰动，必须等待产生误差以后，然后再来慢慢调节予以消除。
>     * 但一般的控制系统，不仅对稳定控制有要求，而且对动态指标也有要求，通常都要求负载变化或给定调整等引起扰动后，恢复到稳态的速度要快，
>     * 因此光有比例和积分调节作用还不能完全满足要求，必须引入微分作用。比例作用和积分作用是事后调节(即发生误差后才进行调节)，
>     * 而微分作用则是事前预防控制，即一发现y(t)有变大或变小的趋势，马上就输出一个阻止其变化的控制信号，以防止出现过冲或超调等。
>     * D越大，微分作用越强，D越小，微分作用越弱。系统调试时通常把D从小往大调，具体参数由试验决定。
>     * 如：由于给定值调整或负载扰动引起y(t)变化，比例作用和微分作用一定等到y(t)值变化后才进行调节，并且误差小时，产生的比例和积分调节作用也小，
>     * 纠正误差的能力也小，误差大时，产生的比例和积分作用才增大。因为是事后调节动态指标不会很理想。而微分作用可以在产生误差之前一发现有产生误差的趋势就开始调节，
>     * 是提前控制，所以及时性更好，可以最大限度地减少动态误差，使整体效果更好。但微分作用只能作为比例和积分控制的一种补充，不能起主导作用，
>     * 微分作用不能太强，太强也会引起系统不稳定，产生振荡，微分作用只能在P和I调好后再由小往大调，一点一点试着加上去。
>     * 自动控制系统在克服误差的调节过程中可能会出现振荡甚至失稳。其原因是由于存在有较大惯性组件（环节）或有滞后(delay)组件，
>     * 具有抑制误差的作用，其变化总是落后于误差的变化。解决的办法是使抑制误差的作用的变化“超前”，即在误差接近零时，抑制误差的作用就应该是零。
>     * 这就是说，在控制器中仅引入“比例”项往往是不够的，比例项的作用仅是放大误差的幅值，而目前需要增加的是“微分项”，它能预测误差变化的趋势。
>     * 这样，具有比例+微分的控制器，就能够提前使抑制误差的控制作用等于零，甚至为负值，从而避免了被控量的严重超调。
>     * 所以对有较大惯性或滞后的被控对象，比例+微分(PD)控制器能改善系统在调节过程中的动态特性。PD控制只在动态过程中才起作用，
>     * 对恒定稳态情况起阻断作用。因此，微分控制在任何情况下都不能单独使用。
> * 优点：
>     * 使系统的响应速度变快，超调减小，振荡减轻，对动态过程有“预测”作用。
>     * 在低频段，主要是PI控制规律起作用，提高系统型别，消除或减少稳态误差；
>     * 在中高频段主要是PD规律起作用，增大截止频率和相角裕度，提高响应速度。
>     * 因此，控制器可以全面地提高系统的控制性能。
>
>
>## PID调试一般原则
>* a.在输出不振荡时，增大比例增益P。
>* b.在输出不振荡时，减小积分时间常数Ti。
>* c.在输出不振荡时，增大微分时间常数Td。
>
>## PID调试一般步骤
>* a. 确定比例增益P
>      * 确定比例增益P 时，首先去掉PID的积分项和微分项，一般是令Ti=0、Td=0（具体见PID的参数设定说明），使PID为纯比例调节。输入设定为系统允许的最大值的60%~70%，
>      * 由0逐渐加大比例增益P，直至系统出现振荡；再反过来，从此时的比例增益P逐渐减小，直至系统振荡消失，记录此时的比例增益P，设定PID的比例增益P为当前值的60%~70%。比例增益P调试完成。
>* b. 确定积分时间常数Ti
>      * 比例增益P确定后，设定一个较大的积分时间常数Ti的初值，然后逐渐减小Ti，直至系统出现振荡，之后在反过来，逐渐加大Ti，直至系统振荡消失。
>      * 记录此时的Ti，设定PID的积分时间常数Ti为当前值的150%~180%。积分时间常数Ti调试完成。
>* c. 确定微分时间常数Td
>      * 微分时间常数Td一般不用设定，为0即可。若要设定，与确定 P和Ti的方法相同，取不振荡时的30%。
>* d. 系统空载、带载联调，再对PID参数进行微调，直至满足要求。
>      * 变速积分的基本思想是，设法改变积分项的累加速度，使其与偏差大小相对应：偏差越大，积分越慢；反之则越快，有利于提高系统品质。
